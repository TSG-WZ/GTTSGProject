
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!--<link rel="stylesheet" href="~/lib/layui-v2.5.5/css/layui.css" media="all">-->
    @Styles.Render("~/BookList_Css")
</head>

<body>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>本机图书列表</legend>
    </fieldset>
    
    <div class="layui-row">
        <div class="left-container layui-col-md2" id="head">
            <ul class="layui-nav layui-nav-tree layui-inline">
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="javascript:;">图书分类</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;">选项1</a></dd>
                        <dd><a href="javascript:;">选项2</a></dd>
                        <dd><a href="">跳转</a></dd>
                    </dl>
                </li>
            </ul>
        </div>

        <div class="layui-col-md10 content-container" id="headdiv">
            <div class="layui-row">
                <ul id="LAY_demo1"></ul>
            </div>
        </div>
    </div>

    <script src="~/lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
    <script>
        function htmlScroll() {
            var top = document.body.scrollTop || document.documentElement.scrollTop;
            if (elFix.data_top < top) {
                elFix.style.position = 'fixed';
                elFix.style.top = 0;
                elFix.style.left = elFix.data_left;
            }
            else {
                elFix.style.position = 'static';
            }
        }

        function htmlPosition(obj) {
            var o = obj;
            var t = o.offsetTop;
            var l = o.offsetLeft;
            while (o = o.offsetParent) {
                t += o.offsetTop;
                l += o.offsetLeft;
            }
            obj.data_top = t;
            obj.data_left = l;
        }

        var oldHtmlWidth = document.documentElement.offsetWidth;
        window.onresize = function () {
            var newHtmlWidth = document.documentElement.offsetWidth;
            if (oldHtmlWidth == newHtmlWidth) {
                return;
            }
            oldHtmlWidth = newHtmlWidth;
            elFix.style.position = 'static';
            htmlPosition(elFix);
            htmlScroll();
        }
        window.onscroll = htmlScroll;

        var elFix = document.getElementById('head');
        htmlPosition(elFix);


        layui.use('flow', function () {
            var flow = layui.flow;

            flow.load({
                elem: '#LAY_demo1' //流加载容器
                //, scrollElem: '#LAY_demo1' //滚动条所在元素，一般不用填，此处只是演示需要。
                , isLazyimg: true //图片懒加载
                , done: function (page, next) { //执行下一页的回调

                    //模拟数据插入
                    setTimeout(function () {
                        var lis = [];
                        for (var i = 0; i < 10; i++) {
                            lis.push('<div class="layui-col-md3 model-container"><div class="img-container">'+
                        '<img lay-src="/Content/default.jpg" /></div><div class="text-container">'+
                        '<center><h2><b>啊啊啊</b></h2></center></div></div>');
                        }

                        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                        next(lis.join(''), page < 3); //假设总页数为 10
                    }, 500);
                }, end: '暂时只显示这么多咯 ~ '
            });


        });
    </script>

</body>
</html>